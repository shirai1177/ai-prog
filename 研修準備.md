# 研修準備

## インスタンスの作成

GCEイメージの ai-edu-image をベースとして、受講者の人数に応じて2～8CPUを選択する。<br>
ディスクはSSDを指定する。（デフォルトが磁気ディスクのため意識的にSSDを選ぶ）

ネットワークは東京リージョンを使う。

ファイアウォールルールの指定として、ネットワークタグに``ai-allow-port``、``ai-allow-ssh``を指定する。<br>
またネットワークは、``ai-net``を選択する。

インスタンスが起動したら、割り当てられたグローバルIPアドレスを静的IPに変更する。

## ログインしての作業

sshログインを行い、作業ユーザをrootに切り替える。

```
sudo su -
```

### ハンズオン用フォルダの作成

受講者の人数を確認し、make_study.sh ファイルを編集し実行する。
これにより受講者用のフォルダと必要コンテンツが生成される。

```
vi make_study.sh
USER_COUNT=12　　<-- 受講者数を入れる
:wq

./make_study.sh
```

### シャットダウンの指定

課金対策として、18:00 に自動シャットダウンを設定する。

```
crontab -e
0 18 * * * /sbin/shutdown -h now
:q
```

## 作成された環境の確認

ブラウザからアクセスしてハンズオン用ドキュメント、jupyter notebookへのアクセス、ハンズオン用フォルダとサンプルデータファイルの確認を行なう。

また教師用フォルダを使って、kerasのプログラムコードの動作を確認する。

## ドキュメントダウンロードサイトの構築

Dockerをインストールし、ダウンロードサイトを立上げる

```
sudo su -
yum install -y docker
systemctl enable docker
systemctl start docker
docker login
docker run -d -e TZ=Asia/Tokyo -p 8899:80 shirai1177/ai-download
```

## 研修環境を削除するときの注意

インスタンスを削除したときは、必ず静的IPも削除する。それを忘れると課金が発生する。

